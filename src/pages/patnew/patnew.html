<!--
  Generated template for the PatnewPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <ion-title>Patient Registration</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
    
  <form [formGroup]="todo" (ngSubmit)="logForm()">
  <ion-list>

       <ion-item>
          <ion-label floating>Nama Pasien</ion-label>
          <ion-input type="text" [(ngModel)]="pasienbaru.name" formControlName="name"></ion-input>
        </ion-item>

       <ion-item>
          <ion-label floating>Jenis Kelamin</ion-label>
          <ion-select [(ngModel)]="pasienbaru.jk" formControlName="jk">
            <ion-option value="pria">Laki-laki</ion-option>
            <ion-option value="perempuan">Perempuan</ion-option>
          </ion-select> 

        </ion-item>

        <ion-item>
          <ion-label floating>Tempat Lahir</ion-label>
          <ion-input type="text" [(ngModel)]="pasienbaru.tl" formControlName="tl"></ion-input>
        </ion-item>
       
        <ion-item>
          <ion-label floating>Tanggal Lahir Pasien (mm/dd/yyyy)</ion-label>
          <ion-datetime displayFormat="MM/DD/YYYY" pickerFormat="MMMM DD YYYY" [(ngModel)]="pasienbaru.myDate" formControlName="myDate"></ion-datetime>
        </ion-item>

        <ion-item>
          <ion-label floating>Nama Suami/Ayah</ion-label>
          <ion-input type="text" [(ngModel)]="pasienbaru.ns" formControlName="ns"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label floating>Alamat</ion-label>
          <ion-textarea rows="5" [(ngModel)]="pasienbaru.almt" formControlName="almt"></ion-textarea>
        </ion-item>
        
        <ion-item>
          <ion-label floating>Kabupaten/Kota</ion-label>
          <ion-select (ionChange)="setDistrictValues(pasienbaru.sCity)" [(ngModel)]="pasienbaru.sCity" formControlName="sCity">
            <ion-option [value]="sCity" *ngFor="let sCity of city">{{sCity.name}} </ion-option>
          </ion-select>
        </ion-item>

        <ion-item *ngIf="selectedDistricts">
          <ion-label floating>Kecamatan</ion-label>
          <ion-select (ionChange)="setKlhValues(pasienbaru.sDistrict)" [(ngModel)]="pasienbaru.sDistrict" formControlName="sDistrict">
            <ion-option [value]="sDistrict" *ngFor="let sDistrict of selectedDistricts">{{sDistrict.name}}</ion-option>
          </ion-select>
        </ion-item>

        <!--
        <ion-item *ngIf="selectedKlhs">
          <ion-label floating>Kelurahan</ion-label>
          <ion-select [(ngModel)]="pasienbaru.sKlh" formControlName="sKlh">
            <ion-option *ngFor="let klh of selectedKlhs">{{klh.name}}</ion-option>
          </ion-select>
        </ion-item>
        -->
      
        <ion-item>
          <ion-label floating>Kode Pos</ion-label>
          <ion-input type="number" [(ngModel)]="pasienbaru.kp" formControlName="kp"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label floating>No. Telepon/HP</ion-label>
          <ion-input type="number" [(ngModel)]="pasienbaru.no" formControlName="no"></ion-input>
        </ion-item>
      
        <ion-item>
          <ion-label floating>Agama</ion-label>
          <ion-select [(ngModel)]="pasienbaru.agama" formControlName="agama">
            <ion-option value="islam">Islam</ion-option>
            <ion-option value="kristen">Kristen</ion-option>
            <ion-option value="katolik">Katolik</ion-option>
            <ion-option value="hindu">Hindu</ion-option>
            <ion-option value="budha">Budha</ion-option>
            <ion-option value="other">Other</ion-option>
          </ion-select> 
        </ion-item> 

        <ion-item no-border>
          <button ion-button type="submit" [disabled]="!todo.valid" large color="danger" (click)="createPatient(
            pasienbaru.name,
            pasienbaru.jk,
            pasienbaru.tl,
            pasienbaru.myDate,
            pasienbaru.ns,
            pasienbaru.almt,
            pasienbaru.sCity,
            pasienbaru.sDistrict,
            pasienbaru.sKlh,
            pasienbaru.kp,
            pasienbaru.no,
            pasienbaru.agama
            );showToast('top')">
              Submit
            </button>
        </ion-item>
  </ion-list>
</form>
    

</ion-content>
